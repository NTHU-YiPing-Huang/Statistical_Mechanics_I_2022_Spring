
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The diffusion equation &#8212; 2022 Statistical Mechanics (I) - PHYS521000</title>
    <script src="https://unpkg.com/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    
    
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/quantecon-book-theme.1ef59f8f4e91ec8319176e8479c6af4e.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">


    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script src="_static/quantecon-book-theme.15b0c36fffe88f468997fa7b698991d3.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Basic concepts in probability theory" href="basic_prob.html" />
    <link rel="prev" title="Scale invariance and the concept of universality class" href="scale_invariance.html" />

<!-- Normal Meta Tags -->
<meta name="author" context="Yi-Ping Huang" />
<meta name="keywords" content="" />
<meta name="description" content=The diffusion equation  The microscopic model  The above-mentioned microscopic models give us exact results without approximations. We can ask: if we relax the  />

<!-- Twitter tags -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:title" content="The diffusion equation"/>
<meta name="twitter:description" content="The diffusion equation  The microscopic model  The above-mentioned microscopic models give us exact results without approximations. We can ask: if we relax the ">
<meta name="twitter:creator" content="@">
<meta name="twitter:image" content="">

<!-- Opengraph tags -->
<meta property="og:title" content="The diffusion equation" />
<meta property="og:type" content="website" />
<meta property="og:url" content="None" />
<meta property="og:image" content="" />
<meta property="og:description" content="The diffusion equation  The microscopic model  The above-mentioned microscopic models give us exact results without approximations. We can ask: if we relax the " />
<meta property="og:site_name" content="2022 Statistical Mechanics (I) - PHYS521000" />
<meta name="theme-color" content="#ffffff" />

  </head>
<body>


    <span id="top"></span>

    <div class="qe-wrapper">

        <div class="qe-main">

            <div class="qe-page" id=diffusion_eq>

                <div class="qe-page__toc">

                    <div class="inner">

                        
                        <div class="qe-page__toc-header">
                            On this page
                        </div>


                        <nav id="bd-toc-nav" class="qe-page__toc-nav">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   The diffusion equation
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-microscopic-model">
     The microscopic model
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-macroscopic-question">
     The macroscopic question
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-currents-and-the-locally-conserved-particle-number">
     The currents and the locally conserved particle number
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-effect-of-external-forces">
     The effect of external forces
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-solution-of-the-diffusion-equation">
   The solution of the diffusion equation
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-equilibrium-solution">
     The equilibrium solution
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-general-solution-of-the-diffusion-equation">
     The general solution of the diffusion equation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-fourier-method">
       The Fourier method
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#why-the-fourier-method">
         Why the Fourier method?
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#the-solution-according-to-the-fourier-method">
         The solution according to the Fourier method
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#green-s-function">
       Green’s function
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                            <p class="logo">
                                
                                    
                                    <a href="syllabus.html"><img src="_static/logo-wide.svg" class="logo" alt="logo"></a>
                                    
                                
                            </p>

                            <p class="powered">Powered by <a href="https://jupyterbook.org/">Jupyter Book</a></p>

                        </nav>

                        <div class="qe-page__toc-footer">
                            
                            
                            <p><a href="#top"><strong>Back to top</strong></a></p>
                        </div>

                    </div>

                </div>

                <div class="qe-page__header">

                    <div class="qe-page__header-copy">

                        <p class="qe-page__header-heading"><a href="syllabus.html">2022 Statistical Mechanics (I) - PHYS521000</a></p>

                        <p class="qe-page__header-subheading">The diffusion equation</p>

                    </div>

                    <p class="qe-page__header-authors">Yi-Ping Huang</p>

                </div> <!-- .page__header -->



                
                <main class="qe-page__content" role="main">
                    
                    <div>
                        
  <div class="section" id="the-diffusion-equation">
<h1>The diffusion equation<a class="headerlink" href="#the-diffusion-equation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-microscopic-model">
<h2>The microscopic model<a class="headerlink" href="#the-microscopic-model" title="Permalink to this headline">¶</a></h2>
<p>The above-mentioned microscopic models give us exact results without approximations. We can ask: if we relax the fixed step size condition, what could be changed? Let’s start with the one-dimensional case. We use <span class="math notranslate nohighlight">\(r\)</span> to denote the displacement of the random walk with a random step size. The microscopic model can be described as</p>
<div class="math notranslate nohighlight">
\[
\underbrace{r(t+\Delta t)}_{\text{The position at }t+\Delta t}=\underbrace{r(t)}_{\text{Position at }t}+\underbrace{l(t)}_{\text{A random step at }t}.
\]</div>
<p>This expression means once the position of the particle at time <span class="math notranslate nohighlight">\(t\)</span> is known, the particle will move to a random new position <span class="math notranslate nohighlight">\(r(t+\Delta t)\)</span>. The microscopic environment is fluctuating wildly, so our reference particle will interact with its environment in a complicated way. We avoid this complication by approximating the coupling of our reference particle with the environment using an effective random displacement <span class="math notranslate nohighlight">\(l\)</span>.</p>
<p>The probability distribution function of the random step, <span class="math notranslate nohighlight">\(l\)</span>, is <span class="math notranslate nohighlight">\(\chi(l)\)</span>. In general, the distribution function can be any function. However, we would like to keep our results as general as possible. Therefore, instead of giving a specific functional form of <span class="math notranslate nohighlight">\(\chi(l)\)</span>, we take the opposite approach. We assume <span class="math notranslate nohighlight">\(\chi(l)\)</span> to be any function that satisfies the following conditions:</p>
<ol class="simple">
<li><p><span class="math notranslate nohighlight">\(\int \chi(z)dz=1\)</span>: It is the normalization condition. We include all the possible results, and the probability is locally conserved.</p></li>
<li><p><span class="math notranslate nohighlight">\(\langle z\rangle=\int z\chi(z)dz=0\)</span>: expectation value of the random step is zero.</p></li>
<li><p><span class="math notranslate nohighlight">\(\langle z^2\rangle=\int z^2\chi(z)dz=a^2\)</span>: The width of the distribution function is characterized by the parameter <span class="math notranslate nohighlight">\(a\)</span>. The requirement that the integral is convergent means the distribution function, <span class="math notranslate nohighlight">\(\chi(z)\)</span> cannot have a slowly decaying tail at large <span class="math notranslate nohighlight">\(|z|\)</span>.</p></li>
</ol>
</div>
<div class="section" id="the-macroscopic-question">
<h2>The macroscopic question<a class="headerlink" href="#the-macroscopic-question" title="Permalink to this headline">¶</a></h2>
<p>In the macroscopic world, we rarely keep track of the microscopic motion of the molecules. Instead, it is more convenient to describe the little particles using a function, <span class="math notranslate nohighlight">\(\rho(r,t)\)</span>, that describes the density field.</p>
<div class="tip admonition">
<p class="admonition-title">What?</p>
<p>Let’s try to think more carefully about how this field is constructed. As we know, the microscopic particles fluctuate at the microscopic length scale. When we define our density field, we evaluate the density at <span class="math notranslate nohighlight">\(r\)</span> by average the particle number over a length scale <span class="math notranslate nohighlight">\(\delta r\)</span>. That is, <span class="math notranslate nohighlight">\(\rho(r,t)=\frac{N_{\delta_r}}{\delta r}\)</span> where <span class="math notranslate nohighlight">\(N_{\delta_r}\)</span> represent the number of particles in <span class="math notranslate nohighlight">\([r-\frac{\delta r}{2},r+\frac{\delta r}{2}]\)</span>. How to choose <span class="math notranslate nohighlight">\(\delta r\)</span>? We hope we can choose <span class="math notranslate nohighlight">\(\delta r\)</span> large enough such that <span class="math notranslate nohighlight">\(\rho(r,t)\)</span> is not fluctuating too much. Why should we expect the fluctuation to become small when <span class="math notranslate nohighlight">\(\delta r\)</span> is large enough? Small compared with what? What happens if <span class="math notranslate nohighlight">\(\delta r\)</span> is too small? What do we mean by “not fluctuating too much”? If we perform a similar analysis in time, what does that mean?</p>
</div>
<div class="figure align-default" id="density-evolution">
<a class="reference internal image-reference" href="_images/diff_den_6.png"><img alt="_images/diff_den_6.png" src="_images/diff_den_6.png" style="width: 750px;" /></a>
<p class="caption"><span class="caption-number">Fig. 7 </span><span class="caption-text">Evolution of the density field.</span><a class="headerlink" href="#density-evolution" title="Permalink to this image">¶</a></p>
</div>
<p>The question we would like to understand at the macroscopic level is: how does the density field change as a function of time if the microscopic components are doing the random walk we proposed at the microscopic model?</p>
<p>The density field at <span class="math notranslate nohighlight">\(x\)</span> is described by</p>
<div class="math notranslate nohighlight">
\[
\rho(x,t+\Delta t)=\int_{-\infty}^{\infty} \rho(x',t) \chi(x-x')dx'.
\]</div>
<p>Here, we make the change of variable <span class="math notranslate nohighlight">\(z=x-x'\)</span> and</p>
<div class="math notranslate nohighlight">
\[
\rho(x, t+\Delta t)=\int_{-\infty}^{\infty} \rho(x-z,t) \chi(z)dz.
\]</div>
<p>Here, we expand RHS by assuming <span class="math notranslate nohighlight">\(z\)</span> to be small. When <span class="math notranslate nohighlight">\(z\)</span> is large, the probability distribution function <span class="math notranslate nohighlight">\(\chi(z)\)</span> decays very fast. Then we have</p>
<div class="math notranslate nohighlight">
\[
RHS\approx \int \left[\rho(x,t) -z\left.\frac{\partial \rho}{\partial z}\right|_{z=x}+\frac{z^2}{2}\left.\frac{\partial^2 \rho}{\partial z^2}\right|_{z=x}\right]\chi(z)dz.
\]</div>
<p>Using the assumptions we have made to our probability distribution functions, we can simplify the expression as</p>
<div class="math notranslate nohighlight">
\[
RHS\approx \rho(x,t)+\frac{a^2}{2}\left.\frac{\partial^2 \rho}{\partial z^2}\right|_{z=x}=\rho(x,t)+\frac{a^2}{2}\frac{\partial^2 \rho}{\partial x^2}.
\]</div>
<p>The LHS can be simplified as</p>
<div class="math notranslate nohighlight">
\[
\rho(x,t+\Delta t)\approx \rho(x,t)+\frac{\partial \rho}{\partial t}\Delta t.
\]</div>
<p>This relation leads to the diffusion equation</p>
<div class="math notranslate nohighlight">
\[
\frac{\partial \rho}{\partial t}=\frac{a^2}{2\Delta t}\frac{\partial^2 \rho}{\partial x^2}.
\]</div>
<p>Finally, we have successfully built the macroscopic description using a microscopic model with parameters <span class="math notranslate nohighlight">\(\frac{a^2}{2\Delta t}\)</span>.</p>
<p>The diffusion equation can also be derived phenomenologically, where we use <span class="math notranslate nohighlight">\(D\)</span>, the diffusion coefficient, to describe the diffusion equation as</p>
<div class="math notranslate nohighlight">
\[
\frac{\partial \rho}{\partial t}=D\frac{\partial^2 \rho}{\partial x^2}.
\]</div>
</div>
<div class="section" id="the-currents-and-the-locally-conserved-particle-number">
<h2>The currents and the locally conserved particle number<a class="headerlink" href="#the-currents-and-the-locally-conserved-particle-number" title="Permalink to this headline">¶</a></h2>
<p>Consider a one-dimensional system where we pick a segment of length <span class="math notranslate nohighlight">\(\Delta x\)</span>. We can ask: what is the change in the number of particles in this segment? A simple derivation gives</p>
<div class="math notranslate nohighlight">
\[
d \rho(x) \Delta x=\left[J(x)-J(x+\Delta x)\right]dt.
\]</div>
<p>When we take the <span class="math notranslate nohighlight">\(\Delta x\to0\)</span> limit, we will have</p>
<div class="math notranslate nohighlight">
\[
\frac{\partial \rho}{\partial t}=-\frac{\partial J}{\partial x}.
\]</div>
<p>This expression helps us to understand the current for the diffusion equation. Combining this relation with the diffusion equation, we have</p>
<div class="math notranslate nohighlight">
\[
\frac{\partial J}{\partial x}=-D\frac{\partial^2\rho}{\partial x^2}.
\]</div>
<p>We can integrate this equation from both ends to get the expression of the diffusion current. Here, the constant of integral should be zero since the microscopic model is an unbiased random walk with no background current.</p>
<div class="tip admonition">
<p class="admonition-title">What?</p>
<p>Suppose we have a density profile of the Gaussian function; what is the expression of the diffusion current?</p>
</div>
</div>
<div class="section" id="the-effect-of-external-forces">
<h2>The effect of external forces<a class="headerlink" href="#the-effect-of-external-forces" title="Permalink to this headline">¶</a></h2>
<p>When we have external force, we modify our microscopic model as</p>
<div class="math notranslate nohighlight">
\[
r(t+\Delta t)=r(t)+l(t)+F\gamma\Delta t.
\]</div>
<p>The additional term, <span class="math notranslate nohighlight">\(F\gamma\Delta t\)</span> is the displacement from a constant external field. We assume the particle’s velocity is zero between the random walk events, the displacement for uniform acceleration motion is</p>
<div class="math notranslate nohighlight">
\[
\frac{1}{2} \frac{F}{m}\Delta t^2=F\gamma\Delta t.
\]</div>
<p>From this expression, we can derive <span class="math notranslate nohighlight">\(\gamma\)</span> as</p>
<div class="math notranslate nohighlight">
\[
\gamma=\frac{\Delta t}{2m}=\frac{\Delta t}{2m}\underbrace{\left(D \frac{2\Delta t}{a^2}\right)}_{\text{from the previous expression of diffusion coefficient}}=\frac{D}{m\left(a/\Delta t\right)^2}=\frac{D}{m\overline{v}^2}\text{.}
\]</div>
<p>Here <span class="math notranslate nohighlight">\(\overline{v}\)</span> is the average velocity between <span class="math notranslate nohighlight">\((t,t+\Delta t)\)</span>.
With similar arguments, we can derive the diffusion equation and the current under the influence of external force to be</p>
<div class="math notranslate nohighlight">
\[
\frac{\partial \rho}{\partial t}=-\gamma F\frac{\partial \rho}{\partial x}+D\frac{\partial^2 \rho}{\partial x^2}=-\frac{\partial J}{\partial x}
\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[
J=\gamma F\rho-D\frac{\partial \rho}{\partial x}\text{.}
\]</div>
</div>
</div>
<div class="section" id="the-solution-of-the-diffusion-equation">
<h1>The solution of the diffusion equation<a class="headerlink" href="#the-solution-of-the-diffusion-equation" title="Permalink to this headline">¶</a></h1>
<p>We would like to understand how the density profile <span class="math notranslate nohighlight">\(\rho(r,t)\)</span> evolve in time and space. It will give us a rough picture of how a system reaches <em>equilibrium</em>. The evolution process toward equilibrium is a complicated process in both classical and quantum systems. The random walk process is the simplest one that can give us a rough picture. We will start from the equilibrium solution, <span class="math notranslate nohighlight">\(\frac{\partial \rho^*(r)}{\partial t}=0\)</span>. Then, we will discuss the general solution <span class="math notranslate nohighlight">\(\rho(r,t)\)</span>.</p>
<div class="tip admonition">
<p class="admonition-title">What?</p>
<p>We also learn a similar concept, the steady-state. How the idea of equilibrium differs from the idea of steady-state? In this section of the lecture note, I did not distinguish the concept clearly. However, the two ideas are subtlely different.</p>
</div>
<div class="section" id="the-equilibrium-solution">
<h2>The equilibrium solution<a class="headerlink" href="#the-equilibrium-solution" title="Permalink to this headline">¶</a></h2>
<p>There are two cases for the equilibrium solution–the case without an external field and the case with an external field. I will discuss both cases.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(F=0\)</span>: <span class="math notranslate nohighlight">\(\frac{\partial {\rho^*}\,^2}{\partial x^2}=D^{-1}\frac{\partial \rho}{\partial t}=0\rightarrow \rho^*=\rho_0+Bx\)</span>. Here, <span class="math notranslate nohighlight">\(\rho_0\)</span> and <span class="math notranslate nohighlight">\(B\)</span> are the constants to be determined. Suppose we study a system of particles confined by a solid container. At the boundary, the current needs to be 0. This leads to the boundary condition <span class="math notranslate nohighlight">\(J=0=-D\frac{\partial \rho^*}{\partial x_{boundary}}=-DB\)</span>. That is, <span class="math notranslate nohighlight">\(B=0\)</span>. So the equilibrium solution, in this case, is the homogeneous distribution, <span class="math notranslate nohighlight">\(\rho^*=\rho_0\)</span> is constant.</p></li>
<li><p><span class="math notranslate nohighlight">\(F=-mg\)</span>: Consider the case with gravity. We have <span class="math notranslate nohighlight">\(\frac{\partial \rho^*}{\partial t}=\gamma mg \frac{\partial \rho^*}{\partial x}+D\frac{\partial^2 \rho^*}{\partial x^2}\)</span>. The solution of this equation is <span class="math notranslate nohighlight">\(\rho^*(x)=A e^{-\frac{\gamma mgx}{D}}+B\)</span>. With the boundary condition that the density is zero at the end of the universe, we have <span class="math notranslate nohighlight">\(\rho^*(x\to\infty)=0, B=0\)</span>. We have the solution <span class="math notranslate nohighlight">\(\rho^*(x)=A e^{-\frac{\gamma mgx}{D}}\)</span>.</p></li>
</ul>
<p>Now we know the behavior of the equilibrium solution, we will further tackle the evolution of the density profile for arbitrary time <span class="math notranslate nohighlight">\(t\)</span>.</p>
</div>
<div class="section" id="the-general-solution-of-the-diffusion-equation">
<h2>The general solution of the diffusion equation<a class="headerlink" href="#the-general-solution-of-the-diffusion-equation" title="Permalink to this headline">¶</a></h2>
<p>We will introduce two methods to solve the diffusion equation. The “solution” of the diffusion equation means we know the density profile for arbitrary space-time once an initial condition, <span class="math notranslate nohighlight">\(\rho_i(x,t=t_i=0)\)</span>, is given. In general, this process is quite complicated. However, the fact that the diffusion equation is a linear equation simplifies the analysis a lot. The key question we should ask is: are there quantities that are kept fixed during the time evolution? We have learned several conserved quantities in the past. Usually, they are related to the symmetry of the system. The important symmetry for later analysis is the translational symmetry in space. That’s why we will start the analysis from the Fourier method. Once we know how the Fourier method works in general, we will apply that to a special initial condition, the Dirac delta function. We will see the property of Dirac delta function provides a convenient structure to define Green’s function of the diffusion equation. Using the Green’s function, we can construct the evolution of the density profile for arbitrary space-time.</p>
<div class="tip admonition">
<p class="admonition-title">What?</p>
<p>Are the energy and momentum conserved quantities in the microscopic random walk model? In a physical system, should they be conserved?</p>
</div>
<div class="section" id="the-fourier-method">
<h3>The Fourier method<a class="headerlink" href="#the-fourier-method" title="Permalink to this headline">¶</a></h3>
<div class="section" id="why-the-fourier-method">
<h4>Why the Fourier method?<a class="headerlink" href="#why-the-fourier-method" title="Permalink to this headline">¶</a></h4>
<p>Our system has translation symmetry. We would like to use that property to simplify our analysis. Let <span class="math notranslate nohighlight">\(T_{\Delta}\)</span> denote the translation operator that shifts the system by displacement <span class="math notranslate nohighlight">\(\Delta\)</span>. We want to analyze the time evolution of our system; we can use <span class="math notranslate nohighlight">\(U_t\)</span> to express the time evolution of the density profile formally. By definition, we have <span class="math notranslate nohighlight">\(\rho_{k}(x,t)=U_t[\rho_k(x,0)]\)</span>. Here, <span class="math notranslate nohighlight">\(k\)</span> is the conserved quantity that is invariant under the time evolution. If such <span class="math notranslate nohighlight">\(k\)</span> exist, it will be helpful for us to analyze the problem. The translational symmetry of our system is equivalent to the following formal expression.</p>
<div class="math notranslate nohighlight">
\[
T_{\Delta}\left\{U_t\left[\rho_k(x,0)\right]\right\} =U_t\left\{T_{\Delta}\left[\rho_k(x,0)\right]\right\}
\]</div>
<p>In other words, the result of the shifted density profile after the time evolution from an initial condition, <span class="math notranslate nohighlight">\(\rho(x,0)\)</span>, is identical with the time evolution from a shifted initial condition.</p>
<p>Next, we discuss the meaning of the quantity <span class="math notranslate nohighlight">\(k\)</span>. If we consider the translation operator as a matrix, then the eigensystem of the translation operator is labeled by <span class="math notranslate nohighlight">\(k\)</span>. That is,</p>
<div class="math notranslate nohighlight">
\[
T_{\Delta}\left[\rho_k(x,0)\right]=\lambda_k\rho_k(x,0).
\]</div>
<p>If we can find the eigenvalues and eigenvectors of the translational operator, <span class="math notranslate nohighlight">\(T_{\Delta}\)</span>. That will be great! Because we can build the following relation</p>
<div class="math notranslate nohighlight">
\[\begin{split}
T_{\Delta}\left\{U_t\left[\rho_k(x,0)\right]\right\} =U_t\left\{T_{\Delta}\left[\rho_k(x,0)\right]\right\} \text{(Translation symmetry)}\\
=U_t\left\{\lambda_k\rho_k(x,0)\right\} \text{(Eigensystem of translation operator)}\\
=\lambda_k \rho_k(x,t)\text{(The time evolved eigenvector is labeled by the same index $k$!)}
\end{split}\]</div>
<p>The above relation says the eigenvalues of <span class="math notranslate nohighlight">\(T_{\Delta}\)</span>  is invariant under the time evolution. The next question is: what are the eigenvalues and eigenvectors of the translation operator? From the definition of eigensystems, we have</p>
<div class="math notranslate nohighlight">
\[
T_{\Delta}\left[\rho_k(x,0)\right]=\lambda_k \rho_k(x,0)=\rho_k(x-\Delta,0).
\]</div>
<p>We can just stare at it, and find a simple solution, <span class="math notranslate nohighlight">\(\rho_{k}(x,0)=e^{ikx}\)</span> and <span class="math notranslate nohighlight">\(\lambda_k=e^{-ik\Delta}\)</span>. So if we expand the initial condition using the eigenvector, <span class="math notranslate nohighlight">\(\rho_k(x,t)\)</span>, the evolution of each component will be labeled by <span class="math notranslate nohighlight">\(k\)</span>.</p>
<div class="tip admonition">
<p class="admonition-title">What?</p>
<p>Symmetry plays an important role in physics. Especially, the representation of the symmetry operator helps us to formulate and analyze the problem. In this case, the translation operator forms an abelian group(Which means the order of applying the translation operator is not important). The irreducible representation of the abelian group is one-dimensional. So we can use <span class="math notranslate nohighlight">\(e^{-ik\Delta}\)</span> to represent the translational operator. From the representation theory of the group, we can rationalize where this solution came from.
<span id="id1">[<a class="reference internal" href="biblio.html#id4">Tin03</a>]</span></p>
</div>
</div>
<div class="section" id="the-solution-according-to-the-fourier-method">
<h4>The solution according to the Fourier method<a class="headerlink" href="#the-solution-according-to-the-fourier-method" title="Permalink to this headline">¶</a></h4>
<p>Now, we know why we want to use the Fourier method to simplify our result. The diffusion equation is a linear equation. In other words, if <span class="math notranslate nohighlight">\(\rho_1\)</span> and <span class="math notranslate nohighlight">\(\rho_2\)</span> are both the solution of the diffusion equation, the linear combination <span class="math notranslate nohighlight">\(c_1\rho_1+c_2\rho_2\)</span> for arbitrary <span class="math notranslate nohighlight">\(c_1\)</span> and <span class="math notranslate nohighlight">\(c_2\)</span> will also be a solution. So if we can use the eigenvectors to expand our general solution, all we need to do is to find the solution for each <span class="math notranslate nohighlight">\(k\)</span> component. The following steps show how the Fourier method works.</p>
<ul class="simple">
<li><p>We can expand the density profile as <span class="math notranslate nohighlight">\(\rho(x,t)=\sum_k\widetilde{\rho_k}(t)e^{ikx}\)</span>.</p></li>
<li><p>Insert this expression into the diffusion equation; we found the eigenvectors will not mix with each other. Therefore, we can focus on a single mode <span class="math notranslate nohighlight">\(k\)</span>.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\frac{\partial}{\partial t}\left[\widetilde{\rho_k}(t)e^{ikx}\right]=D\frac{\partial^2}{\partial x^2}\left[\widetilde{\rho_k}(t)e^{ikx}\right]\\
\frac{\partial}{\partial t}\widetilde{\rho_k}(t)=D(-k^2)\widetilde{\rho_k}(t)
\end{split}\]</div>
<p>We can derive the solution of the above equation as</p>
<div class="math notranslate nohighlight">
\[
\widetilde{\rho_k}(t)=\widetilde{\rho_k}(0)e^{-Dk^2t}
\]</div>
<ul class="simple">
<li><p>We can use the <span class="math notranslate nohighlight">\(t=0\)</span> density profile to get <span class="math notranslate nohighlight">\(\widetilde{\rho_k}(0)\)</span>.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
\widetilde{\rho_k}(0)=\int_{-\infty}^{\infty}\rho(x,t=0)e^{-ikx}dx\text{.}
\]</div>
<ul class="simple">
<li><p>The solution is</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
\rho(x,t)=\frac{1}{N}\sum_{k} \left[\widetilde{\rho_k}(0)e^{-Dk^2t}\right]e^{ikx}\xrightarrow{\text{continuous limit}}\frac{1}{2\pi}\int_{-\infty}^{\infty}\left[\widetilde{\rho_k}(0)e^{-Dk^2t}\right]e^{ikx}dx
\]</div>
<p>We can see the solution suggests the high wave vector modes will decay exponentially, <span class="math notranslate nohighlight">\(e^{-Dk^2t}\)</span>.</p>
<p>The above steps suggest that we need to get <span class="math notranslate nohighlight">\(\widetilde{\rho_k}(t=0)\)</span> by performing Fourier analysis of the density profile at <span class="math notranslate nohighlight">\(t=0\)</span>, <span class="math notranslate nohighlight">\(\rho(x,t=0)\)</span>. Then, we reconstruct the evolution of the density profile by integration over <span class="math notranslate nohighlight">\(k\)</span>. The process can be carried out. However, it will be better if, for an arbitrary given initial condition, we can derive the density profile at an arbitrary space-time point. We will introduce the idea of Green’s function, which serves this purpose.</p>
</div>
</div>
<div class="section" id="green-s-function">
<h3>Green’s function<a class="headerlink" href="#green-s-function" title="Permalink to this headline">¶</a></h3>
<p>The method of Green’s function is based on a property of Dirac delta function. That is, we can express an arbitrary function using the Dirac delta function.</p>
<div class="math notranslate nohighlight">
\[
F(x)=\int F(x-y)\delta(y)dy\text{.}
\]</div>
<p>Instead of asking how each component of <span class="math notranslate nohighlight">\(k\)</span> evolves as a function of time, Green’s function method asks another question: if the initial profile is a Dirac delta function, how does it evolve as a function of time? We can apply the Fourier method to this special initial condition to answer this question. We define the time evolution of a Dirac delta function to be <span class="math notranslate nohighlight">\(G(x,t)\)</span>.</p>
<p>We then use the Fourier method to derive <span class="math notranslate nohighlight">\(G(x,t)\)</span>.</p>
<ol class="simple">
<li><p><span class="math notranslate nohighlight">\(\widetilde{G_k}(t=0)=\int G(x,t=0)e^{-ikx}dx=1\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(G(x,t)=\frac{1}{2\pi}\int e^{ikx}e^{-Dk^2t}dk=\frac{1}{\sqrt{4\pi Dt}}e^{-\frac{x^2}{4Dt}}\)</span> is the solution we are looking for.</p></li>
</ol>
<p>The time-evolution of arbitrary density profile is</p>
<div class="math notranslate nohighlight">
\[
\rho(x,t)=\int \rho(y,t=0)G(x-y,t)dy=\int\rho(y,t=0)\left[\frac{1}{\sqrt{4\pi Dt}}e^{-\frac{x^2}{4Dt}}\right]dy\text{.}
\]</div>
<p>To get the time evolution of a density profile, all we need to do is to input the density profile at time <span class="math notranslate nohighlight">\(t=0\)</span> into the above expression.</p>
<p>Now let’s look at the Green’s function; we found it is a Gaussian function with standard deviation <span class="math notranslate nohighlight">\(\sigma(t)=\sqrt{2Dt}\)</span>. From our previous simple model, we know <span class="math notranslate nohighlight">\(D=\frac{a^2}{2\Delta t}\)</span>. Then we got <span class="math notranslate nohighlight">\(\sigma(t)=\sqrt{2\frac{a^2}{2\Delta t}t}=a\sqrt{t/\Delta t}=a\sqrt{N}\)</span> which is equivalent with the <span class="math notranslate nohighlight">\(N\)</span>-steps random walk with step size <span class="math notranslate nohighlight">\(a\)</span>. To some extent, Green’s function having a function form of a Gaussian is closely related to the central limit theorem.  The central limit theorem suggests the sum of independent variables has a probability distribution function that converges to a Gaussian. We will prove the central limit theorem in our homework 1.</p>
<p>Now we know how to solve a diffusion equation and how it reaches equilibrium. However, for generic closed classical or quantum systems, how the system reaches equilibrium is still an open question. We will not elaborate more on this fascinating research problem. Instead, we will refer our readers to other sources that discuss these interesting topics ( see, <em>e.g.</em> Thermalization and many-body localization, see <span id="id2">[<a class="reference internal" href="biblio.html#id7">Sre94</a>]</span> and <span id="id3">[<a class="reference internal" href="biblio.html#id6">NH14</a>]</span> )</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                    </div>
                    
                </main> <!-- .page__content -->
                


                <footer class="qe-page__footer">

                    <p><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/80x15.png"></a></p>

                    <p>Creative Commons License &ndash; This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International.</p>

                </footer> <!-- .page__footer -->

            </div> <!-- .page -->

            

            
            <div class="qe-sidebar bd-sidebar inactive" id="site-navigation">

                <div class="qe-sidebar__header">


                    Contents

                </div>

                <nav class="qe-sidebar__nav" id="qe-sidebar-nav" aria-label="Main navigation">
                    <ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="syllabus.html">
   Syllabus for Statistical Mechanics (I) – PHYS521000
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  fundamentals
 </span>
</p>
<ul class="current nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="introduction.html">
   Introduction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="thermodynamics.html">
     Thermodynamics as an effective theory
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="motivation.html">
     Motivation: Why learn statistical mechanics?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="scope.html">
     The applications of statistical mechanics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="numerical_tools.html">
   Numerical tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Python_tutorial_0.html">
     Basic introduction of python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Python_tutorial_1.html">
     Basic numerics and plot
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children active">
  <a class="reference internal" href="random_walk_and_emergent_properties.html">
   Random walk and emergent properties
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="1DRW.html">
     One dimensional random walk
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="drunkards_walk.html">
     Drunkard’s walk
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="scale_invariance.html">
     Scale invariance and the concept of universality class
    </a>
   </li>
   <li class="toctree-l2 current active active">
    <a class="current reference internal" href="#">
     The diffusion equation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="basic_prob.html">
     Basic concepts in probability theory
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Statistical Mechanics
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Rev_thermodynamics.html">
   Thermodynamics and statistical mechanics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="a_simple_example.html">
     A simple example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rev_thermodyn.html">
     Review of thermodynamics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Postulates_SM.html">
   Postulates of statistical mechanics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="phase_space_observables.html">
     Phase space and Observables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="entropy_exp.html">
     The fundamental postulate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Liouville_theorem.html">
     Liouville’s theorem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ergodicity.html">
     Ergodicity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="mc_ensemble.html">
     Microcanonical ensemble
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="c_ensemble.html">
     Canonical ensemble
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="g_gc_ensemble.html">
     Generalized ensemble and grand canonical ensemble
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Application of statistical mechanics
 </span>
</p>
<ul class="nav bd-sidenav nav sidenav_l1">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="free_systems.html">
   Interacting free systems
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="oscillators.html">
     Oscillators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="phonon_photon.html">
     Phonon and photon
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Fermion_Boson.html">
     Free Fermions and Bosons
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="phases_transitions.html">
   Phases and phase transitions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="phase_diagram.html">
     Phases and phase diagram
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Ising_models.html">
     Ising models and spontaneous symmetry breaking
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Ising_models_2.html">
     Transfer matrix method
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="MFT.html">
     Mean-field theory
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="GL.html">
     Teaser of the Ginsburg-Landau theory
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="biblio.html">
   Epilogue
  </a>
 </li>
</ul>

                </nav>

                <div class="qe-sidebar__footer">

                </div>

            </div> <!-- .sidebar -->
            
        </div> <!-- .main -->

        <div class="qe-toolbar">

            <div class="qe-toolbar__inner">

                <ul class="qe-toolbar__main">
                    <li data-tippy-content="Table of Contents" class="btn__sidebar"><i data-feather="menu"></i></li>
                    <li data-tippy-content="Home"><a href="syllabus.html"><i data-feather="home"></i></a></li>
                    <li class="btn__qelogo"><a href="" title=""><span class="show-for-sr"></span></a></li>
                    <!-- <li class="btn__search">
                        <form action="search.html" method="get">
                            <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off">
                            <i data-feather="search"></i>
                        </form>
                    </li> -->
                </ul>

                <ul class="qe-toolbar__links">
                    <li data-tippy-content="Fullscreen" class="btn__fullscreen"><i data-feather="maximize"></i></li>
                    <li data-tippy-content="Increase font size" class="btn__plus"><i data-feather="plus-circle"></i></li>
                    <li data-tippy-content="Decrease font size" class="btn__minus"><i data-feather="minus-circle"></i></li>
                    <li data-tippy-content="Change contrast" class="btn__contrast"><i data-feather="sunset"></i></li>
                        <li data-tippy-content="Download PDF" onClick="window.print()"><i data-feather="file"></i></li>
                    <li data-tippy-content="View Source"><a target="_blank" href="https://github.com/executablebooks/jupyter-book/diffusion_eq.md" download><i data-feather="github"></i></a></li>
                </ul>

            </div>

        </div> <!-- .toolbar -->
        <div id="downloadPDFModal" style="display: none;">
            <ul class="pdf-options" style="display: block;">
                <li class="download-pdf-book" onClick="window.print()">
                    <p>Lecture (PDF)</p>
                </li>
                <li class="download-pdf-file">
                    <a href="" download><p>Book (PDF)</p></a>
                </li>
            </ul>
        </div>
        <div id="settingsModal" style="display: none;">
            <p class="modal-title"> Notebook Launcher </p>
            <div class="modal-desc">
            <p>
                Choose public or private cloud service for "Launch" button.
            </p>
            </div>
            <p class="modal-subtitle">Select a server</p>
            <ul class="modal-servers">
            <li class="active launcher-public">
                <span class="label">Public</span>
                <select id="launcher-public-input">
                
                </select>
                <i class="fas fa-check-circle"></i>
            </li>
            <li class="launcher-private">
                <span class="label">Private</span>
                <input type="text" id="launcher-private-input" data-repourl="" data-urlpath="" data-branch=>
                <i class="fas fa-check-circle"></i>
            </li>
            </ul>
            <p class="launch"><a href="" id="advancedLaunchButton" target="_blank">Launch Notebook</a></p>
            <script>
                // QuantEcon Notebook Launcher
                const launcherTypeElements = document.querySelectorAll('#settingsModal .modal-servers li');
                // Highlight the server type if previous selection exists
                if (typeof localStorage.launcherType !== 'undefined') {
                  for (var i = 0; i < launcherTypeElements.length; i++) {
                    launcherTypeElements[i].classList.remove('active');
                    if ( launcherTypeElements[i].classList.contains(localStorage.launcherType) ) {
                      launcherTypeElements[i].classList.add('active');
                    }
                  }
                }
                // Highlight server type on click and set local storage value
                for (var i = 0; i < launcherTypeElements.length; i++) {
                  launcherTypeElements[i].addEventListener('click', function() {
                    for (var j = 0; j < launcherTypeElements.length; j++) {
                      launcherTypeElements[j].classList.remove('active');
                    }
                    this.classList.add('active');
                    if ( this.classList.contains('launcher-private') ) {
                      localStorage.launcherType = 'launcher-private';
                    } else if ( this.classList.contains('launcher-public') ) {
                      localStorage.launcherType = 'launcher-public';
                    }
                    setLaunchServer();
                  })
                }
                const launcherPublic = document.getElementById('launcher-public-input');
                const launcherPrivate = document.getElementById('launcher-private-input');
                const pageName = "diffusion_eq";
                const repoURL = "";
                const urlPath = "";
                const branch = ""
                const launchNotebookLink = document.getElementById('advancedLaunchButton');

                // Highlight public server option if previous selection exists
                if (typeof localStorage.launcherPublic !== 'undefined') {
                  launcherPublic.value = localStorage.launcherPublic;
                }
                // Update local storage upon public server selection
                launcherPublic.addEventListener('change', (event) => {
                  setLaunchServer();
                });
                // Populate private server input if previous entry exists
                if (typeof localStorage.launcherPrivate !== 'undefined') {
                  launcherPrivate.value = localStorage.launcherPrivate;
                }
                // Update local storage when a private server is entered
                launcherPrivate.addEventListener('input', (event) => {
                  setLaunchServer();
                });

                // Function to update the "Launch Notebook" link href
                function setLaunchServer() {
                  launchNotebookLink.removeAttribute("style")
                  if ( localStorage.launcherType == 'launcher-private' ) {
                    let repoPrefix = "/jupyter/hub/user-redirect/git-pull?repo=" + repoURL + "&branch=" + branch + "&urlpath=" + urlPath;
                    launcherPrivateValue = launcherPrivate.value
                    if (!launcherPrivateValue) {
                        launchNotebookLink.removeAttribute("href")
                        launchNotebookLink.style.background = "grey"
                        return
                    }
                    localStorage.launcherPrivate = launcherPrivateValue;
                    privateServer = localStorage.launcherPrivate.replace(/\/$/, "")
                    if (!privateServer.includes("http")) {
                        privateServer = "http://" + privateServer
                    }
                    launchNotebookLinkURL = privateServer + repoPrefix;
                  } else if ( localStorage.launcherType == 'launcher-public' ) {
                    launcherPublicValue = launcherPublic.options[launcherPublic.selectedIndex].value;
                    localStorage.launcherPublic = launcherPublicValue;
                    launchNotebookLinkURL = localStorage.launcherPublic;
                  }
                  if (launchNotebookLinkURL) launchNotebookLink.href = launchNotebookLinkURL;
                }
                // Check if user has previously selected a server
                if ( (typeof localStorage.launcherPrivate !== 'undefined') || (typeof localStorage.launcherPublic !== 'undefined') ) {
                  setLaunchServer();
                }
                </script>

        </div>

    </div> <!-- .wrapper-->
    
  </body>
</html>